

@using CFP.Common.Business_Entities;
@using CFP.Common.Utility;
@model LoginModel
@{
    Layout = "_LoginLayout";
    string loaderImage = "admin-loading.gif";
}

<link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet">

<style>
    body { margin: 0; height: 100vh; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
    .login-container { display: flex; height: 100vh; width: 100%; }
    .login-left { flex: 1; background: linear-gradient(135deg, #4f46e5, #9333ea); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 60px; text-align: center; }
    .login-left img { width: 240px; margin-bottom: 30px; }
    .login-right { flex: 1; display: flex; justify-content: center; align-items: center; background: #ffffff; }
    .login-box { width: 380px; position: relative; }
    .form-control { height: 48px; border-radius: 8px !important; }
    .input-group-text { background: #f2f4f7; border: 1px solid #ced4da; }
    .btn-login { height: 48px; border-radius: 8px; width: 100%; font-weight: 600; }
    #loadingIMG { width: 80px; display: none; margin: 10px auto; }
</style>

<div class="login-container">

    <div class="login-left">
        <img src="~/lib/images/logo-dark.png">
        <h2>Welcome Back 👋</h2>
        <p>Your dashboard is waiting. Please sign in.</p>
    </div>

    <div class="login-right">
        <div class="login-box">

            <!-- ✅ Error Messages -->
            @if (TempData[AppCommon.ErrorTempKeyName] != null)
            {
                <div class="alert alert-danger">@TempData[AppCommon.ErrorTempKeyName]</div>
            }
            else if (TempData[AppCommon.SuccessTempKeyName] != null)
            {
                <div class="alert alert-success">@TempData[AppCommon.SuccessTempKeyName]</div>
            }

            <!-- ✅ Loader -->
            <div class="text-center">
                <img src="~/lib/images/@loaderImage" id="loadingIMG" />
            </div>

            <form method="post" asp-action="Index" asp-controller="Account" class="needs-validation" onsubmit="return encryptPwd();" id="form">

                <div class="mb-3">
                    <label asp-for="UserName" class="fw-semibold"></label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="ri-user-line"></i></span>
                        <input asp-for="UserName" id="txtUsername" class="form-control" autocomplete="off" />
                    </div>
                    <span asp-validation-for="UserName" class="text-danger"></span>
                </div>

                <div class="mb-4">
                    <label asp-for="UserPassword" class="fw-semibold"></label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="ri-lock-password-line"></i></span>
                        <input asp-for="UserPassword" id="txtPassword" type="password" class="form-control" autocomplete="off" />
                    </div>
                    <span asp-validation-for="UserPassword" class="text-danger"></span>
                </div>

                <button type="button" id="submitButton" class="btn btn-primary btn-login">
                    <i class="ri-login-circle-line"></i> Sign In
                </button>

                <div class="mt-3 text-center">
                    <a asp-action="ForgetPassword" asp-controller="Account" class="text-decoration-none text-primary">Forgot Password?</a>
                </div>

            </form>
        </div>
    </div>

</div>

@section Scripts {
    @* <script src="~/lib/js/theme/aes.js"></script> *@

    <script>
        $(document).ready(function () {
            $("#loadingIMG").hide();
        });

        $("#submitButton").on("click", function () {
            if ($("#form").valid()) {
                $("#submitButton").attr("disabled", true);
                $("#loadingIMG").show();
                $("#form").submit();
            } else {
                $("#loadingIMG").hide();
                $("#submitButton").removeAttr("disabled");
            }
        });

        function encryptPwd() {
            var user = $("#txtUsername").val().trim();
            var pass = $("#txtPassword").val().trim();
            if (user === "" || pass === "") return false;

            var key = CryptoJS.enc.Utf8.parse('8080808080808080');
            var iv = CryptoJS.enc.Utf8.parse('8080808080808080');
            var encrypted = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(pass), key, { keySize: 128/8, iv: iv, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7 });

            $("#txtPassword").val(encrypted);
            return true;
        }
    </script>
}



@* @using CFP.Common.Business_Entities;
@using CFP.Common.Utility;
@model LoginModel

@{
    ViewData["Title"] = "Login";
    Layout = "_GoRevLoginLayout";
}
@{
    string loaderImage = "admin-loading.gif";
}
<div class="login-form login-signin" id="pnlSignIn">

    <form method="post" asp-action="Index" asp-controller="Account" class="needs-validation" onsubmit="return encryptPwd();" id="form">
        <div class="col-12 text-center " style="margin-top:100px">
            <img src="~/lib/images/logo-dark.png" id="clientLogo" class="mb-20" style="object-fit: contain;  width:400px" />
        </div>
        <div class="col-12 text-center">
            @if (TempData[AppCommon.ErrorTempKeyName] != null)
            {
                <div class="v-stack">
                    <div class="alert alert-danger" role="alert">
                        @TempData[AppCommon.ErrorTempKeyName]
                    </div>
                </div>
            }
            else if (TempData[AppCommon.SuccessTempKeyName] != null)
            {
                <div class="v-stack">
                    <div class="alert alert-success" role="alert">
                        @TempData[AppCommon.SuccessTempKeyName]
                    </div>
                </div>
            }
        </div>
        <div class="col-12 text-center">
            <img src="~/lib/images/@(loaderImage)" height="150" id="loadingIMG" style="display:none" />
        </div>
        <div class="form-group">
            <label asp-for="UserName" class="font-size-h6 font-weight-bolder text-dark"></label>
            <input asp-for="UserName" id="txtUsername" type="text" style="border: 1px solid silver;" class="form-control form-control-solid h-auto py-5 px-5 rounded-lg gorev-framework-username" autocomplete="off" />
            <span class="text-danger text-align-left" asp-validation-for="UserName"></span>
        </div>
        <div class="form-group">
            <label asp-for="UserPassword" class="font-size-h6 font-weight-bolder text-dark"></label>
            <input asp-for="UserPassword" type="password" id="txtPassword" style="border: 1px solid silver;" class="form-control form-control-solid h-auto py-5 px-5 rounded-lg gorev-framework-username" autocomplete="off" />
            <span class="text-danger text-align-left" asp-validation-for="UserPassword"></span>
            <br />
        </div>

        <div class="pb-lg-0 pb-5 text-center">
            <button type="button" id="submitButton" class="btn btn-primary font-weight-bolder font-size-h6 px-8 py-4 my-3 btn-shadow mr-3 gorev-framework-login-btn mt-ladda-btn ladda-button" style="display: block;">Sign In</button>
        </div>
        <div class="form-group mt-1">
            <div class="row">
                <div class="col-12">
                    <a style="float:left" asp-action="ForgetPassword" asp-controller="Account" class="text-primary font-size-h6 font-weight-bolder text-hover-primary pt-5" id="kt_login_forgot">Forgot Password ?</a>

                </div>
            </div>
        </div>

        <div class="form-group mt-1" style="text-align:justify;color:grey">
            <p>
                <b>Notice to all users:</b><br />
                This system is restricted solely to authorized users and may be monitored for administrative and security reasons. The user expressly consents to such monitoring. Any use of this system must be in compliance with Alphadera Labs policies and applicable laws. Unauthorized users or any unauthorized use may subject the user to criminal and civil penalties under state, federal, or other applicable domestic and foreign laws.

            </p>
        </div>
    </form>
</div>

@section Scripts{
    <script src="~/lib/js/theme/aes.js" asp-append-version="true"></script>
    <script>
        $(document).ready(function () {
            $("#loadingIMG").hide();
        })
        $("#submitButton").on("click", function () {
            if ($("#form").valid()) {
                $("#submitButton").attr("disabled", true);
                $("#loadingIMG").show();
                $("#form").submit();
            } else {
                $("#loadingIMG").hide();
                $("#submitButton").removeAttr("disabled");
            }
        })
    </script>
} *@